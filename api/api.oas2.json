{"swagger":"2.0","info":{"title":"Ferret Server API","version":"0.1","description":"API of Ferret Server","contact":{"name":"Tim Voronov","email":"ziflex@gmail.com","url":"https://github.com/ziflex"},"license":{"name":"MIT"}},"paths":{"/projects":{"get":{"summary":"List Project","operationId":"findProjects","responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/project-output"}}}},"parameters":[{"$ref":"#/parameters/page"},{"$ref":"#/parameters/size"}]},"post":{"summary":"Create Project","operationId":"createProject","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/project-create"}}],"responses":{"201":{"description":"","schema":{"$ref":"#/definitions/entity"}}}}},"/projects/{projectID}":{"parameters":[{"$ref":"#/parameters/projectID"}],"get":{"summary":"Get Project","operationId":"getProject","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/project-output-detailed"}}}},"put":{"summary":"Update Project","operationId":"updateProject","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/project-update"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/entity"}}}},"delete":{"summary":"Delete Project","operationId":"deleteProject","responses":{"204":{"description":""}}}},"/projects/{projectID}/scripts":{"parameters":[{"$ref":"#/parameters/projectID"}],"get":{"summary":"List Script","operationId":"findScripts","responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/script-output"}}}},"parameters":[{"$ref":"#/parameters/page"},{"$ref":"#/parameters/size"}]},"post":{"summary":"Create Script","operationId":"createScript","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/script-create"}}],"responses":{"201":{"description":"","schema":{"$ref":"#/definitions/entity"}}}}},"/projects/{projectID}/scripts/{scriptID}":{"parameters":[{"$ref":"#/parameters/projectID"},{"$ref":"#/parameters/scriptID"}],"get":{"summary":"Get Script","operationId":"getScript","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/script-output-detailed"}}}},"put":{"summary":"Update Script","operationId":"updateScript","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/script-create"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/entity"}}}},"delete":{"summary":"Delete Script","operationId":"deleteScript","responses":{"204":{"description":""}}}},"/projects/{projectID}/execution":{"parameters":[{"$ref":"#/parameters/projectID"},{"$ref":"#/parameters/status"}],"get":{"summary":"List Execution","operationId":"findExecutions","responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/execution-output"}}}}},"post":{"summary":"Create Execution","operationId":"createExecution","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/execution-input"}}],"responses":{"200":{"description":"","schema":{"type":"string"}}}}},"/projects/{projectID}/execution/{jobID}":{"parameters":[{"$ref":"#/parameters/projectID"},{"name":"jobID","in":"path","type":"string","required":true,"pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"}],"get":{"summary":"Get Status of Execution","operationId":"getExecution","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/execution-output-detailed"}}}},"delete":{"summary":"Cancel Execution","operationId":"deleteExecution","responses":{"204":{"description":""}}}}},"consumes":["application/json"],"produces":["application/json"],"definitions":{"project-common":{"type":"object","title":"Project Common","description":"The properties that are shared amongst all versions of the Project model.","required":["name"],"properties":{"name":{"type":"string","minLength":3,"maxLength":100},"description":{"type":"string","minLength":10,"maxLength":255}}},"project-create":{"$ref":"#/definitions/project-common","title":"Project Create"},"project-output":{"title":"Project Output","description":"The properties that are included when fetching a list of Projects.","allOf":[{"$ref":"#/definitions/entity"},{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}]},"project-output-detailed":{"title":"Project Output Detailed","description":"The properties that are included when fetching a single Project.","$ref":"#/definitions/project-entity"},"script-common":{"title":"Script Common","description":"The properties that are shared amongst all versions of the Script model.","type":"object","properties":{"name":{"type":"string","minLength":3,"maxLength":100},"description":{"type":"string","minLength":10,"maxLength":255},"execution":{"$ref":"#/definitions/script-execution"},"persistence":{"$ref":"#/definitions/script-persistence"}},"required":["name","execution","persistence"]},"script-create":{"title":"Script Create","description":"The properties that are allowed when creating a Script.","$ref":"#/definitions/script-common"},"script-output":{"title":"Script Output","description":"The properties that are included when fetching a list of Scripts.","allOf":[{"$ref":"#/definitions/entity"},{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}]},"script-output-detailed":{"title":"Script Output Detailed","description":"The properties that are included when fetching a single Script.","$ref":"#/definitions/script-entity"},"metadata":{"type":"object","title":"Metadata","description":"Response model for data creation endpoints","properties":{"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["created_at"]},"project-update":{"title":"Project Update","description":"The properties that are allowed when updating a Project.","$ref":"#/definitions/project-common"},"script-update":{"title":"Script Update","description":"The properties that are allowed when updating a Script.","$ref":"#/definitions/script-common"},"entity":{"title":"Entity","description":"Represents a database entity","allOf":[{"type":"object","properties":{"id":{"type":"string"},"rev":{"type":"string"}},"required":["id","rev"]},{"$ref":"#/definitions/metadata"}]},"script-execution":{"type":"object","title":"Script Execution Settings","description":"Represents script execution settings like query and params","properties":{"query":{"type":"string","minLength":8},"params":{"type":"object","additionalProperties":{"$ref":"#/definitions/any"}}},"required":["query"]},"script-persistence":{"type":"object","title":"Script Persistence","properties":{"local":{"type":"string"},"remote":{"type":"array","items":{"type":"string"}}}},"project-entity":{"allOf":[{"$ref":"#/definitions/entity"},{"$ref":"#/definitions/project-common"}],"title":"Project Entity","description":"Represents a full Project entity."},"script-entity":{"allOf":[{"$ref":"#/definitions/entity"},{"$ref":"#/definitions/script-common"}],"title":"Script Entity"},"any":{"title":"Any"},"execution-common":{"type":"object","title":"Execution Common","description":"The properties that are shared amongst all versions of the Execution model.","properties":{"job_id":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"script_id":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"script_rev":{"type":"string"},"status":{"$ref":"#/definitions/execution-status"},"cause":{"$ref":"#/definitions/execution-cause"}},"required":["job_id","script_id","script_rev","status","cause"]},"execution-input":{"type":"object","title":"Execution Input","description":"The properties that are allowed when creating or updating a Execution.","properties":{"scriptID":{"type":"string","pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"params":{"type":"object","additionalProperties":{"$ref":"#/definitions/any"}}},"required":["scriptID"]},"execution-output":{"title":"Execution Output","description":"The properties that are included when fetching a list of Executions.","allOf":[{"type":"object","properties":{}},{"$ref":"#/definitions/execution-common"}]},"execution-output-detailed":{"title":"Execution Output Detailed","description":"The properties that are included when fetching a single Execution.","allOf":[{"$ref":"#/definitions/execution-output"},{"type":"object","properties":{"params":{"type":"object","additionalProperties":{"$ref":"#/definitions/any"}},"started_at":{"type":"string"},"ended_at":{"type":"string"},"logs":{"type":"array","items":{"type":"string"}},"error":{"type":"string"}}}]},"execution-status":{"type":"string","enum":["unknown","queued","running","completed","cancelled","errored"],"title":"Execution Status","description":"Execution stats"},"execution-cause":{"type":"string","enum":["unknown","manual","schedule","hook"],"title":"Execution Cause","description":"Execution cause"}},"parameters":{"page":{"in":"query","type":"integer","name":"page","format":"int32","default":1,"description":"Page number for queries","minimum":1},"size":{"name":"size","in":"query","type":"integer","description":"Page size","format":"int32","minimum":1,"maximum":100,"default":10},"projectID":{"name":"projectID","in":"path","type":"string","required":true,"pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"scriptID":{"name":"scriptID","in":"path","type":"string","required":true,"pattern":"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"},"status":{"name":"status","in":"query","type":"string","enum":["unknown","queued","running","completed","cancelled","errored"],"allowEmptyValue":true}},"responses":{"Error":{"description":"Error resonse","schema":{"type":"string"}}}}